!function(f){var l={init:function(){l.render_parts(),f(document).on("user_registration_frontend_after_ajax_complete",function(){f(".ur-frontend-form").each(function(){0<f(this).find(".user-registration-form-submission-preview").length&&f(this).find(".user-registration-form-submission-preview").each(function(){f(this).remove()})})}),f(".user-registration-multi-part-nav").on("click",function(r){r.preventDefault(),r.stopImmediatePropagation();var r=f(this),t=r.closest(".ur-frontend-form form.register"),i=t.find(".user-registration-multi-part-indicator"),r=r.attr("data-action"),e=parseInt(i.attr("data-current-part")),a=parseInt(i.attr("data-total"));t.find(".ur-multipart-preview-loader").remove(),t.find(".user-registration-form-submission-preview").remove(),t.find(".user-registration-form-submission-preview-error").remove(),"next"===r&&e<a?l.check_form_validation(t,e)&&i.attr("data-current-part",++e):"prev"===r&&1<e&&i.attr("data-current-part",--e),l.render_indicator(),l.render_parts(),l.scroll_top(t)})},entry_preview:function(r){r.each(function(r,t){var e=f(t),t=e.find(".user-registration-multi-part-indicator"),t=parseInt(t.attr("data-current-part")),i=(1!==t&&0===e.find(".ur-multipart-preview-loader").length&&"false"!==f(".user-registration-multi-part-previewer").attr("data-part-preview-"+t)&&e.find(".user-registration-multi-part-indicator").after('<div class="ur-multipart-preview-loader"><div class="lds-dual-ring"></div></div>'),e.serializeArray());i.push({name:"action",value:"user_registration_multipart_form_submission_preview"}),i.push({name:"security",value:user_registration_multi_part_params.user_registration_multipart_form_submission_preview_nonce}),i.push({name:"current_part",value:t}),f.ajax({url:user_registration_multi_part_params.ajax_url,type:"POST",data:i}).done(function(r,t,i){"success"===r.data.response||!0===r.success?(0!==e.has(".user-registration-form-submission-preview").length&&e.find(".user-registration-form-submission-preview").remove(),e.find(".user-registration-multi-part-indicator").after(r.data)):0===e.has(".user-registration-form-submission-preview-error").length&&e.find(".user-registration-multi-part-indicator").after('<div class="user-registration-form-submission-preview-error">'+user_registration_multi_part_params.user_registration_multipart_form_submission_preview_error+"</div>")}).fail(function(){0===e.has(".user-registration-form-submission-preview-error").length&&e.find(".user-registration-multi-part-indicator").after('<div class="user-registration-form-submission-preview-error">'+user_registration_params.error+"</div>")}).always(function(){e.find(".ur-multipart-preview-loader").remove()})})},render_parts:function(){var p=f(".ur-frontend-form form.register");p.each(function(r,t){var t=f(t),i=t.find(".user-registration-multi-part-indicator"),e=t.find(".ur-button-container"),a=e.find("button.user-registration-multi-part-nav-next"),s=e.find("button.user-registration-multi-part-nav-prev"),n=e.find(".ur-submit-button"),e=e.find(".ur-reset-button"),o=t.find("#ur-recaptcha-node"),u=parseInt(i.attr("data-current-part")),d=parseInt(i.attr("data-total"));0!==i.length&&1!==d&&(t.find(".user-registration-part").hide(),t.find(".user-registration-part.user-registration-part-"+u).show(),a.text(a.attr("data-label-part-"+u)),s.text(s.attr("data-label-part-"+u)),1==u?(a.show(),s.hide(),n.hide(),e.hide(),o.hide()):u===d?(a.hide(),s.show(),n.show(),e.show(),o.show()):(a.show(),s.show(),n.hide(),e.hide(),o.hide()),l.entry_preview(p))})},render_indicator:function(){f(".ur-frontend-form form.register").each(function(r,t){var i=f(t).find(".user-registration-multi-part-indicator"),t=i.attr("data-indicator"),e=parseInt(i.attr("data-current-part")),a=parseInt(i.attr("data-total"));switch(t){case"progress":var s=i.find(".user-registration-progressbar-status").find(".user-registration-multi-part-indicator-title"),n=i.find(".user-registration-multi-part-indicator-steps-current"),o=i.find(".user-registration-multi-part-indicator-progress-wrap > .user-registration-multi-part-indicator-progress"),u=e/a*100+"%";s.text(s.attr("data-part-title-"+e)),n.text(e),o.css("width",u);break;case"circle":case"arrow":var d=i.find(".user-registration-multi-part--steps-list");d.find("li.user-registration-multi-part-indicator-title").removeClass("active");for(var p=0;p<e;p++)d.find("li.user-registration-multi-part-indicator-title:nth("+p+")").addClass("active")}})},scroll_top:function(r){var r=r.offset().top,t=f("html, body").scrollTop(),i=0;0!==f("#wpadminbar").length&&(i=f("#wpadminbar").height()),r<t&&f("html, body").animate({scrollTop:r-i-30},500)},check_form_validation:function(r,t){var i,e,a=r.valid();return a&&(r.find(".user-registration-password-strength").length&&(e=r.find(".user-registration-password-strength").attr("data-current-strength"),i=r.find(".user-registration-password-strength").attr("data-min-strength"),parseInt(e,0)<parseInt(i,0)&&(""!==r.find("#user_pass").val()&&(e='<label id="user_pass_error" class="user-registration-error" for="user_pass">'+user_registration_params.ursL10n.password_strength_error+".</label>",r.find("#user_pass_error").remove(),r.find(".user-registration-password-hint").after(e),r.find("#user_pass").attr("aria-invalid",!0),r.find("#user_pass").trigger("focus")),a=!1)),0<f(".user-registration-part-"+t).find("[data-field-type='date']").length&&f.each(f(".user-registration-part-"+t).find("[data-field-type='date']"),function(){var r;""==f(this).val()&&"required"==f(this).attr("required")&&(r='<label id="'+($data_id=f(this).data("id"))+'_error" class="user-registration-error" for="'+$data_id+'">'+user_registration_params.message_required_fields+".</label>",f(".user-registration-part-"+t).find("#"+$data_id+"_error").remove(),f(".user-registration-part-"+t).find("[data-id='"+$data_id+"']").parent().append(r),a=!1)})),a}};f(document).ready(function(){l.init()}),f(window).on("load",function(){l.init()})}(jQuery);