!function(t){var e={};function a(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(n,s,function(e){return t[e]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=286)}({109:function(t,e){t.exports={tvaRemoveParam:function(t,e){var a=e.split("?")[0];return this.tvaUrlParamExists("page_id",window.location.href)?a=a+"?page_id="+this.tvaGetParameterByName("page_id",window.location.href):a},tvaUrlParamExists:function(t,e){var a=t+"=";return-1!==e.indexOf("?"+a)||-1!==e.indexOf("&"+a)},tvaGetParameterByName:function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}}},286:function(t,e,a){var n=window.ThriveAppFront||{},s=window.ThriveAppWidgets||{},o=a(109);!function(t){window.TCB_Front&&(TCB_Front.apprenticeDynamicActions=a(287),TCB_Front.apprenticeDynamicActions.init());var e=t(document);t.fn.extend({tva_collapsible:a(288),tva_widget_collapsible:a(289)}),t(".tva-header .tva-inner-header").children().length>1&&t(".tva-header .tva-inner-header div").last().addClass("tva-dropdownmenu"),t(".tva-header > div > ul li").on("mouseenter",(function(){if(t("ul",this).length){var e=t("ul:first",this);e.offset().left+e.width()<=t(".tva-header").width()||(t(this).parent().addClass("edge"),t(this).find("ul").addClass("edge"))}})),t(".tva-header > div").click((function(){t(this).toggleClass("visible")})),t("#ta-registration-form").on("submit",(function(){t(this).find('input[name="tva_captcha"]').remove()}));var r,i,l=function(e){if("tva_lesson"===n.lesson.post_type&&1!==parseInt(n.visual_editing_enabled)){var a={lesson_id:n.lesson_page,completed:!1};e&&(a.completed=!0),t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",data:a,url:n.routes.frontend+"/mark_lesson/"})}};if(!n.is_inner_frame&&!n.wizard){var c;n.course.ID&&n.allowed&&!n.is_admin&&t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",data:{course_id:n.course.ID},url:n.routes.frontend+"/process_conversion/"}),n.lesson_page&&n.allowed&&l(),t(".tva-finish-lesson").on("click",(function(t){l(!0)})),t(".tva-filter-checkbox-container").on("click",(function(e){e.preventDefault();var a=t(this).find(".tva-filter-course-clear-filters"),n=t(".tva-filters-wrapper"),s=t(".tva-search-wrapper"),r=t(this).find(".tva-filter").is(":checked");if(t(this).find(".tva-filter").prop("checked",!r),a.length>0&&(n.find(".tva-filter-checkbox-container").each((function(){t(this).children("div:first").removeClass("tva-filter-checkbox-selected")})),n.find(".tva-filter").each((function(){t(this).prop("checked",!1)})),s.find(".tva-search-input").val("")),function(e,a){t(e).find(".tva-filter").is(":checked")?t(e).children("div:first").addClass("tva-filter-checkbox-selected"):t(e).children("div:first").removeClass("tva-filter-checkbox-selected");"function"==typeof a&&a()}(this,p),a.length>0){var i="";if(o.tvaUrlParamExists("page_id",window.location.href))i="?page_id="+o.tvaGetParameterByName("page_id",window.location.href);else i=o.tvaRemoveParam("filters",window.location.href);window.history.pushState({},document.title,i)}}));var d=document.getElementById("tva_front_search"),m=null;function p(e){var a=t(".tva-courses-container");if(!0!==a.hasClass("tva-loading")){var s=t(".tva-filter-checkbox-container input:checkbox:checked").map((function(){return t(this).val()})).get();c=t(".tva-search-input").val(),a.addClass("tva-loading"),a.append('<div class="tva-front-loader tva-spinner-css tva-spinner-scope"><div class="tva-spinner-rolling"><div></div></div></div>'),a.find(".tva-course-card").remove(),t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",url:n.routes.frontend+"/filters/",data:{s:c,terms:s,page:e,is_index_page:n.index_page}}).done((function(e){a.removeClass("tva-loading"),a.empty().append(e),n.index_page&&a.find(".tva-course-description").addClass("scrollbar-macosx").scrollbar(),t("html, body").animate({scrollTop:0},400),t(".ttw-uni-page-numbers").on("click",(function(){p(t(this).attr("data-tva-page-nr"))})),u()}))}}function u(){var e;e=!0===t(".tva-filters-container").find(".tva-filter").is(":checked")?"inline-block":"none",t(".tva-clear-filters").css("display",e)}d&&(d.onkeyup=function(){var t=this;m&&clearTimeout(m),m=setTimeout((function(){c!==t.value&&p()}),300)},e.on("click",".tva-search-submit",(function(){p()}))),e.on("click","a.tva-page-numbers",(function(){p(t(this).attr("data-tva-page-nr"))})),u()}1==n.tva_register_page&&(jQuery('input[type="password"]').on("change",(function(){r=jQuery("input[name='user_pass']").val(),i=jQuery("input[name='confirm_pass']").val()})),jQuery("#tva-register-button").on("click",(function(e){var a;!0!==(a=jQuery("input[name=user_email]").val(),/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a))&&(e.preventDefault(),jQuery(".tva-password-mismatch").fadeIn("slow"),jQuery(".tva-invalid-email").fadeIn("slow")),jQuery('input[name="user_pass"], input[name="user_login"]').each((function(){""===jQuery(this).val()&&(e.preventDefault(),setTimeout((function(){jQuery(".tva-required-filed").fadeOut("slow"),jQuery(".tva-invalid-email").fadeOut("slow")}),5e3)),r!==i&&(jQuery(".tva-invalid-password").fadeIn("slow"),e.preventDefault())})),void 0===r&&t('input[name="user_pass"]').parent().next("p").fadeIn("slow"),void 0===i&&(t('input[name="confirm_pass"]').parent().next("p").fadeIn("slow"),t("#tva-register-button").addClass("tva-btn-margin-top"))})),jQuery('input[name="user_pass"], input[name="confirm_pass"]').on("focusin",(function(){jQuery(".tva-invalid-password").fadeOut("slow")})),jQuery('#ta-registration-form input[type=email], input[name="user_pass"], input[name="confirm_pass').on("focusin",(function(){jQuery(".tva-required-filed").fadeOut("slow"),jQuery(".tva-invalid-email").fadeOut("slow")})),jQuery("#ta-registration-form input[type=email]").on("focusout",(function(){var t={email:jQuery(this).val()};jQuery.ajax({type:"POST",url:n.routes.frontend+"/check_email/",data:t}).done((function(t){!0===t&&(jQuery("#tva-email-error-wrapper").fadeIn("slow"),setTimeout((function(){jQuery("#tva-email-error-wrapper").fadeOut("slow")}),5e3)),jQuery("#tva-register-button").prop("disabled",t)}))})));if(jQuery(".tva-register-url").on("click",(function(){document.cookie="tva_lesson_to_redirect="+window.location.href+"; path=/"})),("open"===n.course.comment_status||"open"===n.lesson.comment_status)&&!0!==n.has_comment_plugin){t(document).ready((function(){v.tvaGetGuestData(t(".tva-comments-form"));var e=Object.keys(n.lesson).length>0?n.lesson.ID:n.course_ref_post_id;t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",url:n.routes.frontend+"/comments/",data:{comment_data:{comment_post_ID:e,comment_term_ID:e===n.course_ref_post_id?n.course.ID:""}}}).done((function(t){v.comment_count=t.comment_count,v.all_comments=t.comments,v.user_can_manage_comments=t.approve,v.renderCommentsList()}))})),t("#tva-comments-list").on("click",".tva-reply-button",(function(e){t(".tva-comment-form").each((function(a,n){t(n).parent().attr("data-comment-id")!==t(e.currentTarget).parent().attr("data-comment-id")&&t(n).slideUp("slow")})),t(this).parent(".tva-single-comment").find(".tva-comment-form").slideToggle(),!1===n.is_user_logged_in&&v.tvaGetGuestData(t(this))})),t(".tva-frontend-template").on("click","#tva-submit-comment",(function(){var e=t(this),a=v.tvaValidateComment(e);!1!==a&&t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",url:n.routes.frontend+"/create_comment/",data:{comment_data:a}}).done((function(a){t("#tva-comments-list").html(""),t(e).parent(".tva-comments-form").find(".tva-comment-content").val(""),v.childs="",v.html="",v.comment_count=a.comment_count,v.renderCommentListHeader(),_.each(a.comments,(function(t){v.html+='<div class="tva-comment-holder">',v.renderComment(t),v.html+="</div>"})),t("#tva-comments-list").html(v.html)})).fail((function(a){t(e).parent().find(".tva-error-message").remove(),v.tvaShowError(a.status,e)}))}));var v={comment_count:0,all_comments:[],childs:"",html:"",user_can_manage_comments:!1,renderComment:function(t){if(this.html+='<div class="tva-single-comment" data-comment-id="'+t.comment_ID+'">',this.html+='<div class="tva-comment-author">'+t.comment_author+"</div>",1!==parseInt(t.comment_approved)){var e=!0===this.user_can_manage_comments?n.t.This:n.t.Your;this.html+='<div class="tva-comment-approval">',this.html+=e+" "+n.t.Moderation,this.html+="</div>"}if(this.html+='<p class="tva-comment">'+t.comment_content.replace(/(?:\r\n|\r|\n)/g,"<br>")+"</p>",this.tvaCommentReplyForm(),this.html+="</div>",null!==t.children&&t.children.length>0){this.childs=t.children,this.html+='<div class="tva-children-list">';var a=this;_.each(this.childs,(function(t){a.renderComment(t)})),this.html+="</div>"}},tvaValidateComment:function(t){t.parent().find(".tva-error-message").remove();var e=this.tvaPrepareCommentData(t);if(""===e.comment_content)return this.tvaShowError("invalid_comment_content",t);if(""===e.comment_author)return this.tvaShowError("invalid_comment_author",t);if(""===e.comment_author_email)return this.tvaShowError("missing_author_email",t);return!1===/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.comment_author_email)?this.tvaShowError("invalid_author_email",t):""!==e.comment_author_url&&!1===/(http(s)?:\/\/.)(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g.test(e.comment_author_url)?this.tvaShowError("invalid_url",t):e},renderCommentListHeader:function(){this.html+='<div class="tva-comments-number">',1===v.comment_count?this.html+="<p>"+n.t.SingleComment+"</p>":v.comment_count>1&&(this.html+="<p>"+this.comment_count+" "+n.t.MultipleComments+"</p>"),this.html+="</div>"},renderCommentsList:function(){var e=this;this.renderCommentListHeader(),this.html+="</div>",_.each(this.all_comments,(function(t){e.html+='<div class="tva-comment-holder">',e.renderComment(t),e.html+="</div>"})),t("#tva-comments-list").append(this.html)},tvaCommentReplyForm:function(){this.html+='<button class="tva-reply-button">'+n.t.Reply+"</button>",this.html+='<div class="tva-comment-form">',this.html+='<textarea class="tva-comment-content"></textarea>',n.current_user.ID||(this.html+='<div class="tva-guest-fileds">',this.html+='<p class="tva-guest">'+n.t.Guest+"</p>",this.html+="<span>"+n.t.GuestName+"</span>",this.html+='<input type="text" class="tva-comment-input" name="name">',this.html+="<span>"+n.t.GuestEmail+"</span>",this.html+='<input type="text" class="tva-comment-input" name="email">',this.html+="<span>"+n.t.GuestUrl+"</span>",this.html+='<input type="text" class="tva-comment-input" name="url">',this.html+="</div>"),this.html+='<button id="tva-submit-comment" >'+n.t.SubmitComment+"</button>",this.html+="</div>"},tvaPrepareCommentData:function(t){var e=t.parent().parent().attr("data-comment-id"),a=Object.keys(n.lesson).length>0?n.lesson.ID:n.course_ref_post_id,s=1===parseInt(n.is_user_logged_in),o=s?n.current_user.display_name:t.parent().find('input[name="name"]').val(),r=s?n.current_user.user_email:t.parent().find('input[name="email"]').val(),i=s?n.current_user.user_url:t.parent().find('input[name="url"]').val(),l={comment_post_ID:a,comment_content:t.parent().find(".tva-comment-content").val(),comment_parent:void 0!==e?e:0,comment_author:o,comment_author_email:r,comment_author_url:i,user_id:n.current_user.ID?n.current_user.ID:"",comment_type:""};return l.comment_term_ID=0===Object.keys(n.lesson).length?n.course.ID:"",l},tvaShowError:function(t,e){var a="";switch(t){case 409:return a='<div class="tva-error-message">'+n.t.DuplicateComment+"</div>",e.parent().append(a),!1;case 429:return a='<div class="tva-error-message">'+n.t.CommentToFast+"</div>",e.parent().append(a),!1;case"invalid_comment_content":return a='<div class="tva-error-message">'+n.t.EmptyComment+"</div>",e.parent().find(".tva-comment-content").after(a),!1;case"invalid_comment_author":return a='<div class="tva-error-message">'+n.t.EmptyName+"</div>",e.parent().find('input[name="name"]').after(a),!1;case"missing_author_email":return a='<div class="tva-error-message">'+n.t.EmptyEmail+"</div>",e.parent().find('input[name="email"]').after(a),!1;case"invalid_author_email":return a='<div class="tva-error-message">'+n.t.InvalidEmail+"</div>",e.parent().find('input[name="email"]').after(a),!1;case"invalid_url":return a='<div class="tva-error-message">'+n.t.InvalidUrl+"</div>",e.parent().find('input[name="url"]').after(a),!1;default:return!0}},tvaGetGuestData:function(t){if(!0!==n.is_user_logged_in){var e=decodeURIComponent(this.tvaGetCookieData("tva_cookie_user_name")).slice(1,-1),a=decodeURIComponent(this.tvaGetCookieData("tva_cookie_user_email")).slice(1,-1),s=decodeURIComponent(this.tvaGetCookieData("tva_cookie_user_url")).slice(1,-1);t.parent().find('input[name="name"]').val(e),t.parent().find('input[name="email"]').val(a),t.parent().find('input[name="url"]').val(s.replace(/\\\//g,"/"))}},tvaGetCookieData:function(t){for(var e=t+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var s=a[n];" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(e))return s.substring(e.length,s.length)}return""}}}t(".tva-cm-lesson").on("mousedown",(function(){t(this).addClass("tva-lesson-pressed")})),t(".tva-cm-lesson").on("mouseup",(function(){t(this).removeClass("tva-lesson-pressed")})),t(document).ready((function(){if(t(".tva-cm-container").tva_collapsible(n.template),s.config){var e=Object.keys(s.config);t.each(e,(function(e,a){!function(e,a){var s=[],o="#"+e;(a.modules||a.chapters)&&(a.modules&&s.push("h2"),a.chapters&&s.push("h3.tva-chapter-title"),s=o+" "+s.join(", "+o+" "),t(s).tva_widget_collapsible({current_post_id:parseInt(n.lesson_page)||null}))}(a,s.config[a])}))}var a=t(".tva-course-description");if(n.index_page&&a.addClass("scrollbar-macosx").scrollbar(),"undefined"!=typeof tve_frontend_options&&!tve_frontend_options.is_editor_page){var o=i("pp");if(parseInt(n.is_checkout)&&parseInt(n.is_user_logged_in)&&o&&"sendowl"===o.toLowerCase()&&(i("pid")||i("bid"))){var r=[];r.push({name:"payment_processor",value:i("pp")}),r.push({name:"bid",value:i("bid")}),r.push({name:"pid",value:i("pid")}),r.push({name:"thrv_so_discount",value:i("thrv_so_discount")}),t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",data:r,url:n.routes.user+"/process_redirect/"}).done((function(t){t.message&&TCB_Front.Utils.toast(t.message,!1),t.redirect&&(document.location.href=t.redirect)})).fail((function(t){TCB_Front.Utils.toast(t.responseJSON.message,!0)}))}function i(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.search);return null!==e&&(e[1]||0)}ThriveGlobal.$j(".thrv-checkout").each((function(){t(this).find('[data-type="password"] input').attr("type","password");var e=["forgot_password","reset_confirmation"],a="tcb-form-error";function s(t){t.stopPropagation(),t.preventDefault();var e=ThriveGlobal.$j(this),a=e.closest(".thrv-checkout");a.find(".tcb-active-state").removeClass("tcb-active-state"),a.find(".tcb-tva-checkout-form-wrapper").addClass("tcb-permanently-hidden"),e.addClass("tcb-active-state"),a.find('.tcb-tva-checkout-form-wrapper[data-instance="'+e.attr("data-instance")+'"]').removeClass("tcb-permanently-hidden")}function o(t,a){t.find(".thrv-button-group").toggleClass("tcb-permanently-hidden",_.contains(e,a))}var r=t(this),l=r.find("form");r.find(".thrv-button-group").off("click.thrv-button-group-item").on("click.thrv-button-group-item",".thrv-button-group-item",s),l.off("submit").on("submit",(function(e){e.stopPropagation(),e.preventDefault();var s=r.find('input[name="config"]').val();if(!s)return!1;var l=ThriveGlobal.$j(this),c=l.closest("form"),d=l.serializeArray(),m={},p="";if(t.map(d,(function(t){m[t.name]=t.value})),_.some(m,(function(t,e){return 0===t.length?(p="empty_fields",!0):"email"!==e||tve_is_email(t)?"confirm_password"===e&&t!==m.password?(p="passwords_not_match",!0):void 0:(p="email",!0)})),p.length>0){var u=TCB_Front.Utils.unserialize(TCB_Front.Base64.decode(s)),v=document.createElement("span");return v.classList.add(a),v.innerText=u.error_messages[p],"empty_fields"===p?c.find('input[type="text"], input[type="email"], input[type="password"]').not("."+a).filter((function(){return!this.value})).addClass(a).after(v):"email"===p?c.find('input[type="email"]').not("."+a).addClass(a).after(v):"passwords_not_match"===p&&c.find('input[type="password"]').not("."+a).addClass(a).after(v),!1}var h=l.closest(".thrv-checkout"),f=l.find("button");f.attr("disabled","disabled"),d.push({name:"payment_processor",value:i("pp")}),d.push({name:"bid",value:i("bid")}),d.push({name:"pid",value:i("pid")}),d.push({name:"thrv_so_discount",value:i("thrv_so_discount")});var g=function(t){var e="";switch(t){case"register":e="tva_register";break;default:e=t}return e}(l.attr("data-route"));t.ajax({headers:{"X-WP-Nonce":n.nonce},type:"POST",data:d,url:n.routes.user+"/"+g+"/"}).fail((function(t){if(_.contains(["existing_user_email","existing_user_login"],t.responseJSON.code)){var e=TCB_Front.Utils.unserialize(TCB_Front.Base64.decode(s)),n=document.createElement("span");n.classList.add(a);var o=e.error_messages.existing_user_email;o=(o=o.replace(/\[a\]/g,'<a href="javascript:void(0)" class="tva-switch-instance-link" data-go_to_instance="login">')).replace(/\[\/a\]/g,"</a>"),jQuery(n).html(o),c.find('input[type="email"]').not("."+a).addClass(a).after(n)}else TCB_Front.Utils.toast(t.responseJSON.message,!0)})).done((function(t){t.message&&TCB_Front.Utils.toast(t.message,!1),t.state&&(h.find(".tcb-tva-checkout-form-wrapper").addClass("tcb-permanently-hidden"),h.find('.tcb-tva-checkout-form-wrapper[data-instance="'+t.state+'"]').removeClass("tcb-permanently-hidden"),o(h,t.state)),t.redirect&&(document.location.href=t.redirect)})).always((function(){f.removeAttr("disabled")}))}));l.find(['input[type="text"]','input[type="email"]','input[type="password"]'].join(",")).on("input",(function(t){var e=t.currentTarget;e.classList.contains(a)&&(e.nextSibling.remove(),e.classList.remove(a))})).on("focus",(function(){this.placeholder=""})).on("blur",(function(){this.placeholder=this.getAttribute("data-placeholder")})),r.off("click.tva-switch-instance-link").on("click.tva-switch-instance-link",".tva-switch-instance-link",(function(t){t.stopPropagation(),t.preventDefault();var e=ThriveGlobal.$j(this),a=e.closest(".thrv-checkout"),n=e.attr("data-go_to_instance");a.find(".tcb-tva-checkout-form-wrapper").addClass("tcb-permanently-hidden"),a.find('.tcb-tva-checkout-form-wrapper[data-instance="'+n+'"]').removeClass("tcb-permanently-hidden"),"login"===n&&(a.find(".tcb-active-state").removeClass("tcb-active-state"),a.find('.thrv-button-group-item[data-instance="'+n+'"]').addClass("tcb-active-state")),o(a,n)})),r.find('.thrv-button-group-item[data-default="true"]').click()}))}})),n.is_editor_page&&TVE.add_filter("tcb_cloud_template_download",(function(t){(n.is_checkout||n.is_thankyou||n.is_login)&&(t.action="tva_cloud_templates");return t}))}(jQuery)},287:function(t,e){var a,n;a=ThriveGlobal.$j,n=TCB_Front,t.exports={isCompleted:0,allowMarkComplete:!0,nextLessonUrl:"",init:function(){var t=this;this.isCompleted=parseInt(ThriveAppFront.is_completed),this.nextLessonUrl=ThriveAppFront.next_lesson_url,this.nextLessonText=ThriveAppFront.next_lesson_text,void 0!==ThriveAppFront.allow_mark_complete&&(this.allowMarkComplete=1===parseInt(ThriveAppFront.allow_mark_complete)),tve_frontend_options.is_editor_page||(this.frontendInit(),this.allowMarkComplete||a(TCB_Front).on("tqb_shortcode_response",(function(e,n){t.allowMarkComplete=n&&void 0!==n.tva_allow_mark_as_complete&&1===parseInt(n.tva_allow_mark_as_complete),t.allowMarkComplete&&a(".tva-disabled-mark-as-complete").removeClass("tva-disabled-mark-as-complete")})))},frontendInit:function(t){var e=this;this.$root=t||n.$document,this.$root.on("tve-dash.load",(function(){TVE_Dash.add_load_item("ta_access_post",{post_id:ThriveAppFront.post_id},null)})),"tva_lesson"===ThriveAppFront.lesson.post_type&&(this.$root.find('span[data-shortcode="tva_dynamic_actions_mark_as_complete_text"][data-attr-go_next_lesson="0"],span[data-shortcode="tva_dynamic_actions_mark_as_complete_next_text"][data-attr-go_next_lesson="0"],a.tve-dynamic-link[data-shortcode-id="mark_as_complete"]').on("click",{},this.markLessonEventCallback.bind(this)),this.$root.find('span[data-shortcode="tva_dynamic_actions_mark_as_complete_next_text"][data-attr-go_next_lesson="1"],span[data-shortcode="tva_dynamic_actions_mark_as_complete_text"][data-attr-go_next_lesson="1"],a.tve-dynamic-link[data-shortcode-id="mark_as_complete_next"]').on("click",{},this.markLessonAndGoNextEventCallback.bind(this)),this.$root.on("unwrapBlockLinks",(function(){e.$root.find('.thrv_wrapper[data-shortcode-id="mark_as_complete_next"]').on("click",{},e.markLessonAndGoNextEventCallback.bind(e)),e.$root.find('.thrv_wrapper[data-shortcode-id="mark_as_complete"]').on("click",{},e.markLessonEventCallback.bind(e))})))},markLessonEventCallback:function(t){t.preventDefault(),this.allowMarkComplete?this.isCompleted?this.goToNextLesson(t.currentTarget):this.markLesson().then():TCB_Front.notificationElement.toggle(ThriveAppFront.deny_mark_complete_toast,"warning")},markLessonAndGoNextEventCallback:function(t){var e=this;if(t.preventDefault(),this.allowMarkComplete){var n=a(t.currentTarget).closest(".thrv_wrapper.thrv-button");if(n.length&&0===parseInt(n.attr("data-next")))return n.find("a").attr("href","javascript:void(0)"),this.markLesson().then((function(){a(t.currentTarget).attr({href:e.nextLessonUrl})}));this.markLessonAndGoToNext(t.currentTarget)}else TCB_Front.notificationElement.toggle(ThriveAppFront.deny_mark_complete_toast,"warning")},markLesson:function(){var t=this;return new Promise((function(e){if(t.isCompleted)return t.updateMarkLessonCompleteAndNext(),void e();t.isCompleted=!0,wp.apiRequest({type:"POST",data:{lesson_id:parseInt(ThriveAppFront.lesson_page),completed:1},url:ThriveAppFront.routes.frontend+"/mark_lesson/"}).success((function(a){a.message&&TCB_Front.Utils.toast(a.message),a.progress_bar&&t.updateOldProgressBar(a.progress_bar),a.lessons_list&&t.updateOldLessonList(a.lessons_list),a.next_lesson_url&&(t.nextLessonUrl=a.next_lesson_url),a.next_lesson_text&&(t.nextLessonText=a.next_lesson_text),t.updateMarkLessonCompleteAndNext(),e(a)}))}))},updateOldProgressBar:function(t){this.$root.find(".tva-progress-container").html(t)},updateOldLessonList:function(t){this.$root.find(".tva-lessons-container").html(t)},markLessonAndGoToNext:function(t){var e=this;this.markLesson(t).then((function(){return e.goToNextLesson(t)}))},updateMarkLessonCompleteAndNext:function(){var t=this;this.$root.find('[data-shortcode="tva_dynamic_actions_mark_as_complete_next_text"]').each((function(e,n){if(1===parseInt(n.getAttribute("data-attr-link"))){var s=n.querySelector("a");s.textContent=t.nextLessonText,s.href=t.nextLessonUrl,a(n).unbind()}else n.textContent=t.nextLessonText})),this.$root.find('[data-shortcode="tva_dynamic_actions_mark_as_complete_text"]').each((function(t,e){e.closest(".thrv_text_element")&&(e.style.display="none")}))},goToNextLesson:function(t){"A"===t.tagName&&"_blank"===t.target||"DIV"===t.tagName&&"_blank"===t.getAttribute("data-target")?window.open(this.nextLessonUrl,"_blank","noopener"):top.location.href=this.nextLessonUrl}}},288:function(t,e){var a;(a=jQuery).fn.extend({tva_collapse:function(t){return this.each((function(){var e=a(this),n=e.parent();e.addClass(t.class_collapsed),e.removeClass(t.class_expanded),!1===e.hasClass("tva_chapter_headline")?(n.find(".tve-chapters-wrapper").slideUp(),0===n.find(".tve-chapters-wrapper").length&&n.find(".tve-lessons-wrapper").slideUp()):e.hasClass("tva_chapter_headline")&&n.find(".tve-lessons-wrapper").slideUp()}))},tva_expand:function(t){return this.each((function(){var e=a(this),n=e.parent();e.removeClass(t.class_collapsed),e.addClass(t.class_expanded),!1===e.hasClass("tva_chapter_headline")?(n.find(".tve-chapters-wrapper").slideDown(),0===n.find(".tve-chapters-wrapper").length&&n.find(".tve-lessons-wrapper").slideDown()):e.hasClass("tva_chapter_headline")&&n.find(".tve-lessons-wrapper").slideDown()}))}}),t.exports=function(t){var e=a.extend({class_expanded:"tva-expanded",class_collapsed:"tva-collapsed",collapse_modules:!1,collapse_chapters:!1},t);return this.each((function(){var t=a(this);t.find(".tva-cm-module .tva-module-header")[e.collapse_modules?"tva_collapse":"tva_expand"](e),t.find("h2.tva_chapter_headline")[e.collapse_chapters?"tva_collapse":"tva_expand"](e),t.find(".tva-cm-module .tva-module-header, h2.tva_chapter_headline").off("click").on("click",(function(t){var n=a(this);"a"!==t.target.tagName.toLowerCase()&&(n.hasClass(e.class_collapsed)?n.tva_expand(e):n.tva_collapse(e))}))}))}},289:function(t,e){var a;a=jQuery,t.exports=function(t){var e=a.extend({class_expanded:"tva-expanded",class_collapsed:"tva-collapsed",slide_time:200,module_tag:"h2",chapter_tag:"h3",current_post_id:null},t);function n(t){var a;return function(t){return t.is(e.module_tag)}(t)?(a=".tva-chapter-lessons",a+=0===t.parent().find("> .tva-chapter-lessons").length?", .tva-lessons-wrapper":""):function(t){return t.is(e.chapter_tag)}(t)&&(a=".tva-lessons-wrapper"),a}function s(){var t=a(this),s=n(t);t.parent().find(s).slideDown(e.slide_time),this.classList.remove(e.class_collapsed),this.classList.add(e.class_expanded)}function o(){var t=a(this),s=n(t),o=t.parent();t.addClass(e.class_collapsed),t.removeClass(e.class_expanded),o.find(s).slideUp(e.slide_time)}return this.each((function(){var t=a(this),n=t.parent().find('.tva-lesson-container[data-id="'+e.current_post_id+'"]');try{e.current_post_id===parseInt(t.data("id"))||n.length>0?s.apply(this):o.apply(this)}catch(t){console.log(t)}t.off("click").on("click",(function(t){if("a"!==t.target.tagName.toLowerCase()){var n=a(this);try{n.hasClass(e.class_collapsed)?s.apply(this):o.apply(this)}catch(t){console.log(t)}}}))}))}}});