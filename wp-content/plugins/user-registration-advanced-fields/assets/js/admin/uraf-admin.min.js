!function(s){var n={init:function(){s('.ur-input-type-select2 .ur-field[data-field-key="select2"] select, .ur-input-type-multi-select2 .ur-field[data-field-key="multi_select2"] select').selectWoo(),s(document).on("click",".ur-selected-item",function(){n.init_settings()})},init_settings:function(){var e=s(".ur-general-setting-field");s.each(e,function(){var e=s(this);switch(e.attr("data-field")){case"default_value":e.on("change",function(){s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-select2")&&n.render_select_box(s(this)),s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-multi_select2")&&n.render_multiple_select_box(s(this))});break;case"options":e.on("keyup",function(){s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-select2")&&s(this).siblings('input[data-field="default_value"]').is(":checked")&&n.render_select_box(s(this)),s(this).closest(".ur-general-setting-block").hasClass("ur-general-setting-multi_select2")&&s(this).siblings('input[data-field="default_value"]').is(":checked")&&n.render_multiple_select_box(s(this))});break;case"header_attribute":e.on("change",function(){n.render_section_title_heading(s(this))});break;case"phone_format":"smart"===e.closest(".ur-general-setting-block").find('select[data-field="phone_format"]').val()?e.closest(".ur-general-setting-block").find(".ur-general-setting-input-mask").hide():e.closest(".ur-general-setting-block").find(".ur-general-setting-input-mask").show(),e.on("change",function(){n.render_phone_format(s(this))});break;case"label":e.on("keyup",function(){n.render_section_title_label(s(this))});break;case"input_mask":n.validate_input_mask(this),e.on("input",function(){n.validate_input_mask(this)})}});e=s(".ur_advance_setting");s.each(e,function(){var e=s(this);switch(e.attr("data-advance-field")){case"enable_payment_slider":e.on("change",function(){n.display_currency()});break;case"enable_prefix_postfix":n.render_prefix_postfix_div(e),e.on("change",function(){n.display_range_prefix_postfix(),n.render_prefix_postfix_div(s(this)),n.render_range_field(e)});break;case"enable_text_prefix_postfix":n.render_prefix_postfix_div(e),n.render_range_field(e),e.on("change",function(){n.render_prefix_postfix_div(s(this)),n.render_range_field(s(this))});break;case"range_min":n.render_range_field(e),e.on("change",function(){n.render_range_field(s(this));var e=s(this).closest(".ur-advance-setting-block").find('input[data-advance-field="range_max"]'),t=parseInt(s(this).val(),10);""===e.val()&&e.val(t+1).trigger("change"),e.attr("min",t+1)});break;case"range_max":n.render_range_field(e),e.on("change",function(){n.render_range_field(s(this));var e=parseInt(s(this).val(),10),t=parseInt(s(this).closest(".ur-advance-setting-block").find('input[data-advance-field="range_min"]').val(),10);(""===s(this).val()||e<t)&&s(this).val(t+1)});break;case"range_prefix":case"range_postfix":e.on("keyup",function(){n.render_range_field(s(this))})}})},render_select_box:function(e){var t=s.trim(e.val()),n=s(".ur-selected-item.ur-item-active"),i=e.closest("li").index(),e=n.find(".ur-field").find("select");e.html(""),e.append("<option value='"+t+"'>"+t+"</option>"),n.find(".ur-general-setting-options > ul.ur-options-list > li").each(function(e,t){t=s(t).find('[data-field="default_value"]');e===i?t.prop("checked",!0):t.prop("checked",!1)})},render_multiple_select_box:function(e){var t=s(".ur-selected-item.ur-item-active"),n=e.closest("li").index(),i=t.find(".ur-field").find("select"),a=e.closest("ul").find("li");i.html(""),s.each(a,function(){var e=s(this).find('input[data-field="default_value"]');e.is(":checked")&&i.append("<option value='"+e.val()+"' selected>"+e.val()+"</option>")}),e.is(":checked")?t.find(".ur-general-setting-options li:nth("+n+') input[data-field="default_value"]').prop("checked",!0):t.find(".ur-general-setting-options li:nth("+n+') input[data-field="default_value"]').prop("checked",!1)},render_section_title_heading:function(e){var t=s(".ur-selected-item.ur-item-active"),n=s.trim(e.val()),e=t.find(".ur-general-setting-label input").val();t.find(".ur-general-setting-select-header select option").prop("selected",!1),t.find('.ur-general-setting-select-header select option[value="'+n+'"]').attr("selected","selected"),t.find(".ur-label").html("<"+n+">"+e+"</"+n+">")},render_phone_format:function(e){var t=s(".ur-selected-item.ur-item-active");e.closest("#ur-setting-form").find("[data-field='field_name']").val()===t.find("[data-field='field_name']").val()&&("smart"===(e=e.val().trim())?s(".ur-general-setting-input-mask").hide():s(".ur-general-setting-input-mask").show(),t.find(".ur-general-setting-select-format select option").prop("selected",!1),t.find('.ur-general-setting-select-format select option[value="'+e+'"]').prop("selected",!0))},render_section_title_label:function(e){var t=s(".ur-selected-item.ur-item-active");t.find("[data-field-key='section_title']").length<1||(e=s.trim(e.val()),heading=t.find(".ur-general-setting-select-header select").val(),t.find(".ur-label").html("<"+heading+">"+e+"</"+heading+">"))},display_currency:function(){s(".ur-selected-item.ur-item-active").find("span.ur-payment-slider-label").toggle()},display_range_prefix_postfix:function(){s(".ur-selected-item.ur-item-active").find("span.ur-range-slider-label").toggle()},render_prefix_postfix_div:function(e){"true"===e.closest(".ur-advance-setting-block").find(".ur-settings-enable-prefix-postfix :selected").val()?(e.closest(".ur-advance-setting-block").find(".ur-advance-enable_text_prefix_postfix").show(),"true"===e.closest(".ur-advance-setting-block").find(".ur-settings-enable-text-prefix-postfix :selected").val()?e.closest(".ur-advance-setting-block").find(".ur-advance-range_prefix, .ur-advance-range_postfix").show():e.closest(".ur-advance-setting-block").find(".ur-advance-range_prefix, .ur-advance-range_postfix").hide()):(e.closest(".ur-advance-setting-block").find(".ur-advance-enable_text_prefix_postfix").hide(),e.closest(".ur-advance-setting-block").find(".ur-advance-range_prefix, .ur-advance-range_postfix").hide())},render_range_field:function(e){var t=s(".ur-selected-item.ur-item-active"),n="",i="";e.closest("#ur-setting-form").find("[data-field='field_name']").val()===t.find("[data-field='field_name']").val()&&("true"===e.closest(".ur-advance-setting-block").find(".ur-settings-enable-prefix-postfix :selected").val()&&(i="true"===e.closest(".ur-advance-setting-block").find(".ur-settings-enable-text-prefix-postfix :selected").val()?(n=e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_prefix"]').val(),e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_postfix"]').val()):(n=""!==e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_min"]').val()?e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_min"]').val():"0",""!==e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_max"]').val()?e.closest(".ur-advance-setting-block").find('input[data-advance-field="range_max"]').val():"10"),t.find(".ur-settings-enable-text-prefix-postfix").val(e.closest(".ur-advance-setting-block").find(".ur-settings-enable-text-prefix-postfix :selected").val())),t.find(".ur-settings-enable-prefix-postfix").val(e.closest(".ur-advance-setting-block").find(".ur-settings-enable-prefix-postfix :selected").val())),n&&t.find("span.ur-range-slider-prefix").text(n),i&&t.find("span.ur-range-slider-postfix").text(i)},validate_input_mask:function(e){var t=s(e).val(),n=!1;try{s(e).clone().inputmask(t)}catch(i){n=!0}s(e).siblings(".input-mask-error-message").remove(),n&&s(e).after('<label style="color: red" class="input-mask-error-message">Your input mask is not valid! If you save as it is, it will not work in the frontend.</label>')}};s(document).ready(function(){n.init()})}(jQuery);