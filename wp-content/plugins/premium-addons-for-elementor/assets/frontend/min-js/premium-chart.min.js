!function(c){c(window).on("elementor/frontend/init",function(){var t=elementorModules.frontend.handlers.Base.extend({getDefaultSettings:function(){return{selectors:{chartElem:".premium-chart-container",chartCanvas:".premium-chart-canvas"}}},getDefaultElements:function(){var t=this.getSettings("selectors");return{$chartElem:this.$element.find(t.chartElem),$chartCanvas:this.$element.find(t.chartCanvas)}},bindEvents:function(){var t=this,e=this.elements.$chartElem.closest(".premium-tabs-content-section"),a=this.elements.$chartElem.closest(".premium-tabs").attr("id"),n=this.elements.$chartElem.closest(".premium-hscroll-temp");if(e.length||n.length)if(n.length){var i=!1,o=n.outerWidth();c(window).on("scroll",function(){!i&&c(window).scrollTop()>=n.data("scroll-offset")-o/2&&(t.run(),i=!0)})}else{var s=e.index();setTimeout(function(){e.is(":visible")&&t.run()},300),c(document).on("click","#"+a+" li[data-list-index='"+s+"']",function(){t.elements.$chartElem.is(":visible")&&!t.elements.$chartElem.hasClass("chart-rendered")&&t.run()})}else this.run()},chartInstance:null,columnsData:null,run:function(){var t=this.getElementSettings(),e=this.elements.$chartElem;if(e.addClass("chart-rendered"),this.columnsData=e.data("chart"),e.closest(".premium-modal-box-modal").length||"load"===t.event)this.getChartData();else{var a=this;new Waypoint({element:this.elements.$chartCanvas,offset:Waypoint.viewportHeight()-250,triggerOnce:!0,handler:function(){a.getChartData(),this.destroy()}})}},getSingleOptions:function(){var a=this.getElementSettings();return{scale:{ticks:{beginAtZero:a.y_axis_begin,stepSize:a.step_size,suggestedMax:a.y_axis_max,callback:function(t){var e=a.format_locale||!1;return t.toLocaleString(e)}}}}},getMultiOptions:function(){var a=this.getElementSettings(),t=a.type;return{scales:{xAxes:[{barPercentage:"bar"===t&&a.x_column_width.size?a.x_column_width.size:.9,display:"pie"!==t&&"doughnut"!==t,gridLines:{display:a.x_axis_grid,color:a.x_axis_grid_color,lineWidth:a.x_axis_grid_width.size,drawBorder:!0},scaleLabel:{display:a.x_axis_label_switch,labelString:a.x_axis_label,fontColor:a.x_axis_label_color,fontSize:a.x_axis_label_size},ticks:{fontSize:a.x_axis_labels_size||12,fontColor:a.x_axis_labels_color||"#54595f",stepSize:a.step_size,maxRotation:a.x_axis_label_rotation||0,minRotation:a.x_axis_label_rotation||0,beginAtZero:a.x_axis_begin,callback:function(t){var e=a.format_locale||!1;return t.toLocaleString(e)}}}],yAxes:[{display:"pie"!==t&&"doughnut"!==t,type:"horizontalBar"!==t?a.data_type:"category",gridLines:{display:a.y_axis_grid,color:a.y_axis_grid_color,lineWidth:a.y_axis_grid_width.size},scaleLabel:{display:a.y_axis_label_switch,labelString:a.y_axis_label,fontColor:a.y_axis_label_color,fontSize:a.y_axis_label_size},ticks:{suggestedMin:a.y_axis_min,suggestedMax:a.y_axis_max,fontSize:a.y_axis_labels_size||12,fontColor:a.y_axis_labels_color||"#54595f",beginAtZero:a.y_axis_begin,stepSize:a.step_size,callback:function(t){var e=a.format_locale||!1;return t.toLocaleString(e)}}}]}}},getGlobalOptions:function(){var d=this.getElementSettings(),r=d.type,t=elementorFrontend.getCurrentDeviceMode(),e=d.value_on_chart,a=("pie"!==r&&"doughnut"!==r||!e)&&["mousemove","mouseout","click","touchstart","touchmove"];return d.legPos=d.legend_position,"desktop"!==t&&(d.legend_hide&&(d.legend_display=!1),d.legPos=d["legend_position_"+t]),{maintainAspectRatio:!1,layout:{padding:{top:"polarArea"===r?6:0}},events:a,animation:{duration:d.duration||500,easing:d.start_animation,onComplete:function(){a||(this.defaultFontSize=16,ctx.font='15px "Helvetica Neue", "Helvetica", "Arial", sans-serif',ctx.textAlign="center",ctx.textBaseline="bottom",this.data.datasets.forEach(function(t){for(var e=0;e<t.data.length;e++){var a=t._meta[Object.keys(t._meta)[0]].data[e]._model,n=t._meta[Object.keys(t._meta)[0]].total,i=a.innerRadius+(a.outerRadius-a.innerRadius)/2,o=a.startAngle,s=o+(a.endAngle-o)/2,r=i*Math.cos(s),l=i*Math.sin(s);ctx.fillStyle=d.yTicksCol;var c=String(Math.round(t.data[e]/n*100))+"%";ctx.fillText(c,a.x+r,a.y+l+15)}}))}},tooltips:{enabled:d.tool_tips,mode:d.tool_tips_mode,callbacks:{label:function(t,e){var a="";"pie"!=r&&"doughnut"!=r&&"polarArea"!=r||(a=e.labels[t.index]+": ");var n=e.datasets[t.datasetIndex],i=n.data.reduce(function(t,e){return parseFloat(t)+parseFloat(e)}),o=n.data[t.index],s=(o/i*100).toPrecision(3);return a+(d.tool_tips_percent?s+"%":o)}}},legend:{display:d.legend_display,position:d.legPos,reverse:d.legend_reverse,labels:{usePointStyle:d.legend_circle,boxWidth:parseInt(d.legend_item_width),fontColor:d.legend_text_color||"#54595f",fontSize:parseInt(d.legend_text_size)}}}},renderChart:function(){var t=this.getID(),n=document.getElementById("premium-chart-canvas-"+t).getContext("2d"),e=this.getGlobalOptions(),i=this.getElementSettings(),a=this.columnsData,o=i.x_axis_labels||"",s=i.type,r={labels:"custom"===i.data_source?o.split(","):[],datasets:[]};if(this.chartInstance=new Chart(n,{type:s,data:r,options:Object.assign(e,"radar"!==s&&"polarArea"!==s?this.getMultiOptions():this.getSingleOptions())}),"custom"===i.data_source){var l=this;a.forEach(function(t){if("pie"!==s&&"doughnut"!==s&&"polarArea"!==s&&"object"==typeof t.backgroundColor&&"empty"!==t.backgroundColor[t.backgroundColor.length-1]){var e=n.createLinearGradient(0,0,0,600),a=t.backgroundColor[1]?t.backgroundColor[1]:t.backgroundColor[0];e.addColorStop(0,t.backgroundColor[0]),e.addColorStop(1,a),t.backgroundColor=e,t.hoverBackgroundColor=e}r.datasets.push(t),l.chartInstance.update()}),c("#premium-chart-canvas-"+t).on("click",function(t){var e=l.chartInstance.getElementAtEvent(t);if(e[0]){var a=l.chartInstance.data.datasets[e[0]._datasetIndex].links[e[0]._index];null!=a&&""!=a&&window.open(a,i.y_axis_urls_target?"_blank":"_top")}})}},getChartData:function(){var t=this.getElementSettings("data_source"),e=this.columnsData,a=this;if("custom"===t)this.renderChart();else{var n=this.elements.$chartElem;n.append('<div class="premium-loading-feed"><div class="premium-loader"></div></div>'),e.url&&c.ajax({url:e.url,type:"GET",success:function(t){n.find(".premium-loading-feed").remove(),a.renderCSVChart(t)},error:function(t){console.log(t)}})}},renderCSVChart:function(t){var e=this.getID(),a=document.getElementById("premium-chart-canvas-"+e).getContext("2d"),n=this,i=t.split(/\r?\n|\r/),o=this.columnsData,s=i.shift().split(o.separator),r=this.getGlobalOptions(),l=this.getElementSettings().type,c={labels:s,datasets:[]};this.chartInstance=new Chart(a,{type:l,data:c,options:Object.assign(r,"radar"!==l&&"polarArea"!==l?this.getMultiOptions():this.getSingleOptions())}),i.forEach(function(t,e){if(0!==t.length){var a={};a.data=t.split(o.separator),o.props[e]&&(a.borderColor=o.props[e].borderColor,a.borderWidth=o.props[e].borderWidth,a.backgroundColor=o.props[e].backgroundColor,a.hoverBackgroundColor=o.props[e].hoverBackgroundColor,a.label=o.props[e].title),c.datasets.push(a),n.chartInstance.update()}})}});elementorFrontend.elementsHandler.attachHandler("premium-chart",t)})}(jQuery);