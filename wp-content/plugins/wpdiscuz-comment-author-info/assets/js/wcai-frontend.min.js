jQuery(document).ready(function(e){function t(t,i){i.append("action","wcaiGetInfo"),wpdiscuzAjaxObj.getAjaxObj(!0,!0,i).done(function(i){t.addClass("wcai-not-clicked"),i&&(e("#wcaiInfo").html(i),e("#wcaiInfo ul.wcai-list .wcai-list-item:first-child").addClass("wcai-active"),e("#wcaiInfo div.wcai-content .wcai-content-item:first-child").addClass("wcai-active"),e("#wcaiInfo").is(":visible")||e("#wcaiInfoAnchor").trigger("click")),e("#wpdiscuz-loading-bar").hide()})}e(document).on("click","body",function(t){var i=e("#wcaiInfoShort");i.is(":visible")&&(i.is(t.target)||0!==i.has(t.target).length||(i.fadeOut(300),e("#wcaiInfoShort").html("")))}),e(document).on("click",".wcai-list-item",function(){var t=e(this).parents(".wcai-wrapper"),i=e(".wcai-info-type",t).val(),n=e("input.wcai-rel",this).val(),a=e(this);if(e("#wcaiInfo #"+n).html().length)e("#"+i+" .wcai-list-item").removeClass("wcai-active"),e("#"+i+" .wcai-content-item").removeClass("wcai-active"),e(this).addClass("wcai-active"),e("#"+i+" #"+n).addClass("wcai-active");else{var o=new FormData;o.append("action",a.attr("data-action")),o.append("page",0),o.append("commentId",e("#wcaiInfo .wcai-wrapper .wcai-comment-id").val()),wpdiscuzAjaxObj.getAjaxObj(!0,!0,o).done(function(t){t&&(e("#"+i+" .wcai-list-item").removeClass("wcai-active"),e("#"+i+" .wcai-content-item").removeClass("wcai-active"),a.addClass("wcai-active"),e("#"+i+" #"+n).addClass("wcai-active"),e("#wcaiInfo #"+n).html(t)),e("#wpdiscuz-loading-bar").hide()})}}),e(document).on("mouseover",".wcai-short-info.wcai-not-clicked",function(t){t.preventDefault();var i=e(this),n=i.parents(".wpd-comment").attr("id"),a=n.substring(n.lastIndexOf("-")+1,n.lastIndexOf("_")),o=e(".wcai-comment-id","#wcaiInfoShort").val(),c=null!=document.dir?document.dir:document.getElementsByTagName("html")[0].getAttribute("dir");if(a!=o){var r=i.offset(),d=i.outerWidth(),l=i.outerHeight();i.removeClass("wcai-not-clicked");var s=new FormData;s.append("action","wcaiGetShortInfo"),s.append("commentId",a),wpdiscuzAjaxObj.getAjaxObj(!0,!0,s).done(function(t){i.addClass("wcai-not-clicked"),t&&(e("#wcaiInfoShort").html(t),e("#wcaiInfoShort").fadeIn(300),e("#wcaiInfoShort").css("top",r.top-.08*l),"rtl"==c?e("#wcaiInfoShort").css("left",r.left-210):e("#wcaiInfoShort").css("left",r.left+d)),e("#wpdiscuz-loading-bar").hide()})}return!1}),e(document).on("click",".wcai-uname-info.wcai-not-clicked",function(i){i.preventDefault();var n=e(this);n.removeClass("wcai-not-clicked");var a=n.parents(".wpd-comment-right").attr("id"),o=a.substring(a.lastIndexOf("-")+1),c=new FormData;return c.append("commentId",o),t(n,c),!1}),e(document).on("click",".wcai-info.wcai-not-clicked",function(i){var n=e(this);n.removeClass("wcai-not-clicked");var a=n.attr("id"),o=a.substring(a.lastIndexOf("_")+1),c=new FormData;return c.append("commentId",o),t(n,c),i.preventDefault(),!1}),e(document).on("click",".wcai-finfo.wcai-not-clicked",function(i){var n=e(this);n.removeClass("wcai-not-clicked");var a=e("#wcaiInfoShort .wcai-wrapper .wcai-comment-id").val();e("#wcaiInfoShort").html(""),e("#wcaiInfoShort").hide("");var o=new FormData;return o.append("commentId",a),t(n,o),i.preventDefault(),!1}),e(document).on("click",".wcai-page-link.wcai-not-clicked",function(t){t.preventDefault();var i=e(this);i.removeClass("wcai-not-clicked");var n=i.data("wcai-page"),a=e("#wcaiInfo .wcai-wrapper .wcai-comment-id").val(),o=e(".wcai-active .wcai-pagination .wcai-action").val(),c=new FormData;c.append("action",o),c.append("commentId",a),c.append("page",n),wpdiscuzAjaxObj.getAjaxObj(!0,!0,c).done(function(t){i.addClass("wcai-not-clicked"),t&&e(".wcai-content-item.wcai-active").html(t),e("#wpdiscuz-loading-bar").hide()})}),e(document).on("click",".wcai-unsubscribe.wcai-not-clicked",function(t){t.preventDefault();var i=e(this).data("wcai-sid"),n=e("#wcaiInfo .wcai-wrapper .wcai-comment-id").val(),a=e(".wcai-wrapper .wcai-page-number").val();1==e(".wcai-content-item.wcai-active").children(".wcai-item").length&&a>0&&(a-=1);var o=new FormData;o.append("action","wcaiUnsubscribe"),o.append("sId",i),o.append("commentId",n),o.append("page",a),wpdiscuzAjaxObj.getAjaxObj(!0,!0,o).done(function(t){e(".wcai-content-item.wcai-active").html(t),e("#wpdiscuz-loading-bar").hide()})}),e(document).on("click",".wcai-unfollow.wcai-not-clicked",function(t){t.preventDefault();var i=e(this).data("wcai-fid"),n=e("#wcaiInfo .wcai-wrapper .wcai-comment-id").val(),a=e(".wcai-wrapper .wcai-page-number").val();1==e(".wcai-content-item.wcai-active").children(".wcai-item").length&&a>0&&(a-=1);var o=new FormData;o.append("action","wcaiUnfollow"),o.append("fId",i),o.append("commentId",n),o.append("page",a),wpdiscuzAjaxObj.getAjaxObj(!0,!0,o).done(function(t){e(".wcai-content-item.wcai-active").html(t),e("#wpdiscuz-loading-bar").hide()})})}),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(i){return t(e,i)}):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,require("jquery")):e.lity=t(e,e.jQuery||e.Zepto)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var i=e.document,n=t(e),a=t.Deferred,o=t("html"),c=[],r="aria-hidden",d="lity-"+r,l='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',s={handler:null,handlers:{image:I,inline:function(e,i){var n,a,o;try{n=t(e)}catch(e){return!1}if(!n.length)return!1;return a=t('<i style="display:none !important"/>'),o=n.hasClass("lity-hide"),i.element().one("lity:remove",function(){a.before(n).remove(),o&&!n.closest(".lity-content").length&&n.addClass("lity-hide")}),n.removeClass("lity-hide").after(a)},youtube:function(e){var i=f.exec(e);if(!i)return!1;return k(x(e,b("https://www.youtube"+(i[2]||"")+".com/embed/"+i[4],t.extend({autoplay:1},y(i[5]||"")))))},vimeo:function(e){var i=p.exec(e);if(!i)return!1;return k(x(e,b("https://player.vimeo.com/video/"+i[3],t.extend({autoplay:1},y(i[4]||"")))))},googlemaps:function(e){var t=m.exec(e);if(!t)return!1;return k(x(e,b("https://www.google."+t[3]+"/maps?"+t[6],{output:t[6].indexOf("layer=c")>0?"svembed":"embed"})))},facebookvideo:function(e){var i=w.exec(e);if(!i)return!1;0!==e.indexOf("http")&&(e="https:"+e);return k(x(e,b("https://www.facebook.com/plugins/video.php?href="+e,t.extend({autoplay:1},y(i[4]||"")))))},iframe:k},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},u=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,f=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,p=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,m=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,w=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,v=function(){var e=i.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return t[n];return!1}();function h(e){var t=a();return v&&e.length?(e.one(v,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function g(e,i,n){if(1===arguments.length)return t.extend({},e);if("string"==typeof i){if(void 0===n)return void 0===e[i]?null:e[i];e[i]=n}else t.extend(e,i);return this}function y(e){for(var t,i=decodeURI(e.split("#")[0]).split("&"),n={},a=0,o=i.length;a<o;a++)i[a]&&(n[(t=i[a].split("="))[0]]=t[1]);return n}function b(e,i){return e+(e.indexOf("?")>-1?"&":"?")+t.param(i)}function x(e,t){var i=e.indexOf("#");return-1===i?t:(i>0&&(e=e.substr(i)),t+e)}function I(e,i){var n=i.opener()&&i.opener().data("lity-desc")||"Image with no description",o=t('<img src="'+e+'" alt="'+n+'"/>'),c=a(),r=function(){var e;c.reject((e="Failed loading image",t('<span class="lity-error"/>').append(e)))};return o.on("load",function(){if(0===this.naturalWidth)return r();c.resolve(o)}).on("error",r),c.promise()}function k(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function j(){return i.documentElement.clientHeight?i.documentElement.clientHeight:Math.round(n.height())}function C(e){var t=O();t&&(27===e.keyCode&&t.close(),9===e.keyCode&&function(e,t){var n=t.element().find(l),a=n.index(i.activeElement);e.shiftKey&&a<=0?(n.get(n.length-1).trigger("focus"),e.preventDefault()):e.shiftKey||a!==n.length-1||(n.get(0).trigger("focus"),e.preventDefault())}(e,t))}function D(){t.each(c,function(e,t){t.resize()})}function O(){return 0===c.length?null:c[0]}function z(e,l,u,f){var p,m,w,v,y=this,b=!1,x=!1;l=t.extend({},s,l),m=t(l.template),y.element=function(){return m},y.opener=function(){return u},y.options=t.proxy(g,y,l),y.handlers=t.proxy(g,y,l.handlers),y.resize=function(){b&&!x&&w.css("max-height",j()-60+"px").trigger("lity:resize",[y])},y.close=function(){if(b&&!x){var e;x=!0,(e=y).element().attr(r,"true"),1===c.length&&(o.removeClass("lity-active"),n.off({resize:D,keydown:C})),((c=t.grep(c,function(t){return e!==t})).length?c[0].element():t(".lity-hidden")).removeClass("lity-hidden").each(function(){var e=t(this),i=e.data(d);i?e.attr(r,i):e.removeAttr(r),e.removeData(d)});var l=a();if(f&&(i.activeElement===m[0]||t.contains(m[0],i.activeElement)))try{f.trigger("focus")}catch(e){}return w.trigger("lity:close",[y]),m.removeClass("lity-opened").addClass("lity-closed"),h(w.add(m)).always(function(){w.trigger("lity:remove",[y]),m.remove(),m=void 0,l.resolve()}),l.promise()}},p=function(e,i,n,a){var o,c="inline",r=t.extend({},n);return a&&r[a]?(o=r[a](e,i),c=a):(t.each(["inline","iframe"],function(e,t){delete r[t],r[t]=n[t]}),t.each(r,function(t,n){return!n||!(!n.test||n.test(e,i))||(!1!==(o=n(e,i))?(c=t,!1):void 0)})),{handler:c,content:o||""}}(e,y,l.handlers,l.handler),m.attr(r,"false").addClass("lity-loading lity-opened lity-"+p.handler).appendTo("body").trigger("focus").on("click","[data-lity-close]",function(e){t(e.target).is("[data-lity-close]")&&y.close()}).trigger("lity:open",[y]),v=y,1===c.unshift(v)&&(o.addClass("lity-active"),n.on({resize:D,keydown:C})),t("body > *").not(v.element()).addClass("lity-hidden").each(function(){var e=t(this);void 0===e.data(d)&&e.data(d,e.attr(r)||null)}).attr(r,"true"),t.when(p.content).always(function(e){w=t(e).css("max-height",j()-60+"px"),m.find(".lity-loader").each(function(){var e=t(this);h(e).always(function(){e.remove()})}),m.removeClass("lity-loading").find(".lity-content").empty().append(w),b=!0,w.trigger("lity:ready",[y])})}function A(e,n,a){e.preventDefault?(e.preventDefault(),e=(a=t(this)).data("lity-target")||a.attr("href")||a.attr("rel")||a.attr("src")):a=t(a);var o=new z(e,t.extend({},a.data("lity-options")||a.data("lity"),n),a,i.activeElement);if(!e.preventDefault)return o}return I.test=function(e){return u.test(e)},A.version="2.2.2",A.options=t.proxy(g,A,s),A.handlers=t.proxy(g,A,s.handlers),A.current=O,t(i).on("click.lity","[data-wcai-lity]",A),A});