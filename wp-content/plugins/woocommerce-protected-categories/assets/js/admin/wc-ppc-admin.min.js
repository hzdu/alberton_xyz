/*!
 * WooCommerce Protected Categories 2.5.2
 * Copyright 2021 Barn2 Plugins
 */
(function(a,b,c){'use strict';var d=a("#product_cat_protection"),e=a("#product_cat_passwords"),f=function(){d.toggle(a("#protected_visibility").prop("checked"))};a("#product_cat_visibility").on("change","input:radio",function(){f()}),d.on("change","input:checkbox",function(){var b=a(this).parent("label").next(".cat-protection__field");b.toggle(a(this).prop("checked"))}),e.on("click","a.cat-password__icon",function(){var b=a(this).parents(".cat-password");if("add"===a(this).data("action")){var c=b.clone(),d=e.children(".cat-password").last().data("index")+1;c.find(".cat-password__icon--delete").length||c.children(".cat-password__icons").append("<a class=\"cat-password__icon cat-password__icon--delete\" data-action=\"delete\" href=\"#\"><span class=\"dashicons dashicons-minus\"></span></a>"),c.attr({"data-first":!1,"data-index":d}).find(".cat-password__field").attr({id:"product_cat_password_"+d,value:""}),c.appendTo(e)}else if("delete"===a(this).data("action")){var f=b.find("input").val();(!f||f&&confirm(wc_ppc_params.confirm_delete))&&b.remove()}return!1}),a(function(){if(a("#addtag, #edittag").length){f(),"selectWoo"in a.fn?(a("#product_cat_user_roles").selectWoo(),a("#product_cat_users").selectWoo({minimumInputLength:3,ajax:{type:"POST",delay:250,url:wc_ppc_params.ajaxUrl,data:function(a){var b={action:"wpc_get_users",nonce:wc_ppc_params.users_nonce,search_term:a.term};return b},processResults:function(a){return{results:a}}}})):"select2"in a.fn&&(a("#product_cat_user_roles").select2(),a("#product_cat_users").select2({minimumInputLength:3,ajax:{type:"POST",delay:250,url:wc_ppc_params.ajaxUrl,data:function(a){var b={action:"wpc_get_users",nonce:wc_ppc_params.users_nonce,search_term:a.term};return b},processResults:function(a){return{results:a}}}}));var d=a("#product_cat_users");if(0<d.data("users").length){var e={action:"wpc_preload_users",nonce:wc_ppc_params.users_nonce,users:d.data("users")};a.post({url:wc_ppc_params.ajaxUrl,data:e}).then(function(a){var b=d.data("users")??[];Array.isArray(a)&&0<a.length&&(a.forEach(a=>{var c=new Option(a.user_login,a.ID,!1,b.includes(a.ID));d.append(c).trigger("change")}),d.trigger({type:"select2:select",params:{data:a}}))})}if(a("#addtag").length&&"MutationObserver"in c){var g=b.getElementById("the-list"),h=function(b){a.each(b,function(b,c){if("childList"==c.type){var d=a("#product_cat_protection");d.find(".cat-password__field, .cat-protection__select").val(null).change(),d.find(".cat-password").not(":eq(0)").remove(),d.find(".cat-protection__check").prop("checked",!1).change(),a("#public_visibility").prop("checked",!0).change()}})},i=new MutationObserver(h);i.observe(g,{childList:!0})}}});var g=function(a){var b=!1,c=a.data("toggleVal"),d=a.closest(".form-table").find("."+a.data("childClass")).closest("tr");b="radio"===a.attr("type")?a.prop("checked")&&c==a.val():"checkbox"===a.attr("type")?"undefined"==typeof c||1==c?a.prop("checked"):!a.prop("checked"):c==a.val(),d.toggle(b)},h=a("#mainform .form-table");h.on("change",".toggle-parent",function(){g(a(this))}),a(function(){h.find(".toggle-parent").each(function(){g(a(this))})})})(jQuery,document,window);