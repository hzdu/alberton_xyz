(function(d){var p=function(){var c={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"00ff62",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156,parent:"body"},n=function(a,b){a=m(a);d(b).data("colpick").fields.eq(1).val(a.r).end().eq(2).val(a.g).end().eq(3).val(a.b).end()},f=function(a,b){d(b).data("colpick").fields.eq(4).val(Math.round(a.h)).end().eq(5).val(Math.round(a.s)).end().eq(6).val(Math.round(a.b)).end()},
e=function(a,b){d(b).data("colpick").fields.eq(0).val(g(a))},k=function(a,b){d(b).data("colpick").selector.css("backgroundColor","#"+g({h:a.h,s:100,b:100}));d(b).data("colpick").selectorIndic.css({left:parseInt(d(b).data("colpick").height*a.s/100,10),top:parseInt(d(b).data("colpick").height*(100-a.b)/100,10)})},u=function(a,b){d(b).data("colpick").hue.css("top",parseInt(d(b).data("colpick").height-d(b).data("colpick").height*a.h/360,10))},p=function(a,b){d(b).data("colpick").currentColor.css("backgroundColor",
"#"+g(a))},v=function(a,b){d(b).data("colpick").newColor.css("backgroundColor","#"+g(a))},q=function(a){a=d(this).parent().parent();if(0<this.parentNode.className.indexOf("_hex")){var b=a.data("colpick");var r=this.value,c=6-r.length;if(0<c){for(var h=[],l=0;l<c;l++)h.push("0");h.push(r);r=h.join("")}b.color=b=w(r);n(b,a.get(0));f(b,a.get(0))}else 0<this.parentNode.className.indexOf("_hsb")?(a.data("colpick").color=b=z({h:parseInt(a.data("colpick").fields.eq(4).val(),10),s:parseInt(a.data("colpick").fields.eq(5).val(),
10),b:parseInt(a.data("colpick").fields.eq(6).val(),10)}),n(b,a.get(0)),e(b,a.get(0))):(b=a.data("colpick"),r=parseInt(a.data("colpick").fields.eq(1).val(),10),c=parseInt(a.data("colpick").fields.eq(2).val(),10),h=parseInt(a.data("colpick").fields.eq(3).val(),10),b.color=b=t({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,c)),b:Math.min(255,Math.max(0,h))}),e(b,a.get(0)),f(b,a.get(0)));k(b,a.get(0));u(b,a.get(0));v(b,a.get(0));a.data("colpick").onChange.apply(a.parent(),[b,g(b),m(b),a.data("colpick").el,
0])},x=function(a){d(this).parent().removeClass("colpick_focus")},y=function(){d(this).parent().parent().data("colpick").fields.parent().removeClass("colpick_focus");d(this).parent().addClass("colpick_focus")},I=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var b=d(this).parent().find("input").focus();a={el:d(this).parent().addClass("colpick_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:a.pageY,field:b,val:parseInt(b.val(),
10),preview:d(this).parent().parent().data("colpick").livePreview};d(document).mouseup(a,A);d(document).mousemove(a,B)},B=function(a){a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val-a.pageY+a.data.y,10))));a.data.preview&&q.apply(a.data.field.get(0),[!0]);return!1},A=function(a){q.apply(a.data.field.get(0),[!0]);a.data.el.removeClass("colpick_slider").find("input").focus();d(document).off("mouseup",A);d(document).off("mousemove",B);return!1},J=function(a){a.preventDefault?a.preventDefault():
a.returnValue=!1;var b={cal:d(this).parent(),y:d(this).offset().top};d(document).on("mouseup touchend",b,C);d(document).on("mousemove touchmove",b,D);a="touchstart"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;q.apply(b.cal.data("colpick").fields.eq(4).val(parseInt(360*(b.cal.data("colpick").height-(a-b.y))/b.cal.data("colpick").height,10)).get(0),[b.cal.data("colpick").livePreview]);return!1},D=function(a){var b="touchmove"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;q.apply(a.data.cal.data("colpick").fields.eq(4).val(parseInt(360*
(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.y)))/a.data.cal.data("colpick").height,10)).get(0),[a.data.preview]);return!1},C=function(a){n(a.data.cal.data("colpick").color,a.data.cal.get(0));e(a.data.cal.data("colpick").color,a.data.cal.get(0));d(document).off("mouseup touchend",C);d(document).off("mousemove touchmove",D);return!1},K=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var b={cal:d(this).parent(),pos:d(this).offset()};
b.preview=b.cal.data("colpick").livePreview;d(document).on("mouseup touchend",b,E);d(document).on("mousemove touchmove",b,F);if("touchstart"==a.type){var c=a.originalEvent.changedTouches[0].pageX;a=a.originalEvent.changedTouches[0].pageY}else c=a.pageX,a=a.pageY;q.apply(b.cal.data("colpick").fields.eq(6).val(parseInt(100*(b.cal.data("colpick").height-(a-b.pos.top))/b.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*(c-b.pos.left)/b.cal.data("colpick").height,10)).get(0),[b.preview]);return!1},
F=function(a){if("touchmove"==a.type){var b=a.originalEvent.changedTouches[0].pageX;var d=a.originalEvent.changedTouches[0].pageY}else b=a.pageX,d=a.pageY;q.apply(a.data.cal.data("colpick").fields.eq(6).val(parseInt(100*(a.data.cal.data("colpick").height-Math.max(0,Math.min(a.data.cal.data("colpick").height,d-a.data.pos.top)))/a.data.cal.data("colpick").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(a.data.cal.data("colpick").height,b-a.data.pos.left))/a.data.cal.data("colpick").height,
10)).get(0),[a.data.preview]);return!1},E=function(a){n(a.data.cal.data("colpick").color,a.data.cal.get(0));e(a.data.cal.data("colpick").color,a.data.cal.get(0));d(document).off("mouseup touchend",E);d(document).off("mousemove touchmove",F);return!1},L=function(a){a=d(this).parent();var b=a.data("colpick").color;a.data("colpick").origColor=b;p(b,a.get(0));a.data("colpick").onSubmit(b,g(b),m(b),a.data("colpick").el)},H=function(a){a.stopPropagation();a=d("#"+d(this).data("colpickId"));a.data("colpick").onBeforeShow.apply(this,
[a.get(0)]);var b=d(this).offset(),c=b.top+this.offsetHeight;b=b.left;var n=M(),e=a.width();b+e>n.l+n.w&&(b-=e);a.css({left:b+"px",top:c+"px"});0!=a.data("colpick").onShow.apply(this,[a.get(0)])&&a.fadeIn();d("html").mousedown({cal:a},G);a.mousedown(function(a){a.stopPropagation()})},G=function(a){0!=a.data.cal.data("colpick").onHide.apply(this,[a.data.cal.get(0)])&&a.data.cal.hide();d("html").off("mousedown",G)},M=function(){var a="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(a?
document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth)}},z=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},N=function(){var a=d(this).parent(),b=a.data("colpick").origColor;a.data("colpick").color=b;n(b,a.get(0));e(b,a.get(0));f(b,a.get(0));k(b,a.get(0));u(b,a.get(0));v(b,a.get(0))};return{init:function(a){a=d.extend({},c,a||{});if("string"==
typeof a.color)a.color=w(a.color);else if(void 0!=a.color.r&&void 0!=a.color.g&&void 0!=a.color.b)a.color=t(a.color);else if(void 0!=a.color.h&&void 0!=a.color.s&&void 0!=a.color.b)a.color=z(a.color);else return this;return this.each(function(){if(!d(this).data("colpickId")){var b=d.extend({},a);b.origColor=a.color;var c="collorpicker_"+parseInt(1E3*Math.random());d(this).data("colpickId",c);c=d('<div class="colpick"><div class="colpick_color"><div class="colpick_color_overlay1"><div class="colpick_color_overlay2"><div class="colpick_selector_outer"><div class="colpick_selector_inner"></div></div></div></div></div><div class="colpick_hue"><div class="colpick_hue_arrs"><div class="colpick_hue_larr"></div><div class="colpick_hue_rarr"></div></div></div><div class="colpick_new_color"></div><div class="colpick_current_color"></div><div class="colpick_hex_field"><div class="colpick_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="colpick_rgb_r colpick_field"><div class="colpick_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_g colpick_field"><div class="colpick_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_rgb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_h colpick_field"><div class="colpick_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_s colpick_field"><div class="colpick_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_hsb_b colpick_field"><div class="colpick_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="colpick_field_arrs"><div class="colpick_field_uarr"></div><div class="colpick_field_darr"></div></div></div><div class="colpick_submit"></div></div>').attr("id",
c);c.addClass("colpick_"+b.layout+(b.submit?"":" colpick_"+b.layout+"_ns"));"light"!=b.colorScheme&&c.addClass("colpick_"+b.colorScheme);c.find("div.colpick_submit").html(b.submitText).click(L);b.fields=c.find("input").change(q).blur(x).focus(y);c.find("div.colpick_field_arrs").mousedown(I).end().find("div.colpick_current_color").click(N);b.selector=c.find("div.colpick_color").on("mousedown touchstart",K);b.selectorIndic=b.selector.find("div.colpick_selector_outer");b.el=this;b.hue=c.find("div.colpick_hue_arrs");
var g=b.hue.parent(),h=navigator.userAgent.toLowerCase(),l="Microsoft Internet Explorer"===navigator.appName,m=l?parseFloat(h.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0;h="#ff0000 #ff0080 #ff00ff #8000ff #0000ff #0080ff #00ffff #00ff80 #00ff00 #80ff00 #ffff00 #ff8000 #ff0000".split(" ");if(l&&10>m)for(l=0;11>=l;l++)m=d("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+h[l]+", endColorstr="+h[l+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+
h[l]+", endColorstr="+h[l+1]+')";'),g.append(m);else h=h.join(","),g.attr("style","background:-webkit-linear-gradient(top,"+h+"); background: -o-linear-gradient(top,"+h+"); background: -ms-linear-gradient(top,"+h+"); background:-moz-linear-gradient(top,"+h+"); -webkit-linear-gradient(top,"+h+"); background:linear-gradient(to bottom,"+h+"); ");c.find("div.colpick_hue").on("mousedown touchstart",J);b.newColor=c.find("div.colpick_new_color");b.currentColor=c.find("div.colpick_current_color");c.data("colpick",
b);n(b.color,c.get(0));f(b.color,c.get(0));e(b.color,c.get(0));u(b.color,c.get(0));k(b.color,c.get(0));p(b.color,c.get(0));v(b.color,c.get(0));b.flat?(c.appendTo(this).show(),c.css({position:"relative",display:"block"})):("body"==b.parent?c.appendTo(document.body):c.appendTo(b.parent),d(this).on(b.showEvent,H),c.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){d(this).data("colpickId")&&H.apply(this)})},hidePicker:function(){return this.each(function(){d(this).data("colpickId")&&
d("#"+d(this).data("colpickId")).hide()})},setColor:function(a,b){b="undefined"===typeof b?1:b;if("string"==typeof a)a=w(a);else if(void 0!=a.r&&void 0!=a.g&&void 0!=a.b)a=t(a);else if(void 0!=a.h&&void 0!=a.s&&void 0!=a.b)a=z(a);else return this;return this.each(function(){if(d(this).data("colpickId")){var c=d("#"+d(this).data("colpickId"));c.data("colpick").color=a;c.data("colpick").origColor=a;n(a,c.get(0));f(a,c.get(0));e(a,c.get(0));u(a,c.get(0));k(a,c.get(0));v(a,c.get(0));c.data("colpick").onChange.apply(c.parent(),
[a,g(a),m(a),c.data("colpick").el,1]);b&&p(a,c.get(0))}})}}}(),x=function(c){c=parseInt(-1<c.indexOf("#")?c.substring(1):c,16);return{r:c>>16,g:(c&65280)>>8,b:c&255}},w=function(c){return t(x(c))},t=function(c){var d={h:0,s:0,b:0},f=Math.max(c.r,c.g,c.b),e=f-Math.min(c.r,c.g,c.b);d.b=f;d.s=0!=f?255*e/f:0;d.h=0!=d.s?c.r==f?(c.g-c.b)/e:c.g==f?2+(c.b-c.r)/e:4+(c.r-c.g)/e:-1;d.h*=60;0>d.h&&(d.h+=360);d.s*=100/255;d.b*=100/255;return d},m=function(c){var d,f;var e=c.h;var k=255*c.s/100;c=255*c.b/100;if(0==
k)e=d=f=c;else{k=(255-k)*c/255;var g=e%60*(c-k)/60;360==e&&(e=0);60>e?(e=c,f=k,d=k+g):120>e?(d=c,f=k,e=c-g):180>e?(d=c,e=k,f=k+g):240>e?(f=c,e=k,d=c-g):300>e?(f=c,d=k,e=k+g):360>e?(e=c,d=k,f=c-g):f=d=e=0}return{r:Math.round(e),g:Math.round(d),b:Math.round(f)}},y=function(c){var g=[c.r.toString(16),c.g.toString(16),c.b.toString(16)];d.each(g,function(c,d){1==d.length&&(g[c]="0"+d)});return g.join("")},g=function(c){return y(m(c))};d.fn.extend({colpick:p.init,colpickHide:p.hidePicker,colpickShow:p.showPicker,
colpickSetColor:p.setColor});d.extend({colpick:{rgbToHex:y,rgbToHsb:t,hsbToHex:g,hsbToRgb:m,hexToHsb:w,hexToRgb:x}})})(jQuery);